(function(){var b,c=[].slice,a=function(d,e){return function(){return d.apply(e,arguments)}};b={_initialize:function(){var d,e=this;this.VERSION="0.10";console.log("DivSugar: version "+this.VERSION);this.EPSILON=0.0001;this.NUM_OF_DIGITS=4;this.DEG_TO_RAD=Math.PI/180;this.RAD_TO_DEG=180/Math.PI;this._id=0;this._animations=[];this.rootTask=null;(function(){var h,g,f;f=navigator.userAgent.toLowerCase();if(f.indexOf("safari")>-1||f.indexOf("chrome")>-1){e._prefix="webkit"}else{if(f.indexOf("firefox")>-1){e._prefix="moz"}else{if(f.indexOf("opera")>-1){e._prefix="o"}else{if(f.indexOf("msie")>-1){e._prefix="ms"}else{e._prefix=null}}}}console.log("DivSugar: use '"+e._prefix+"' as prefix");h=document.createElement("div");e._transform="-"+e._prefix+"-transform";if(!(h.style[e._transform]!=null)){e._transform="transform"}console.log("DivSugar: use '"+e._transform+"'");e._transformStyle="-"+e._prefix+"-transform-style";if(!(h.style[e._transformStyle]!=null)){e._transformStyle="transform-style"}console.log("DivSugar: use '"+e._transformStyle+"'");e._transformOrigin="-"+e._prefix+"-transform-origin";if(!(h.style[e._transformOrigin]!=null)){e._transformOrigin="transform-origin"}console.log("DivSugar: use '"+e._transformOrigin+"'");e._perspective="-"+e._prefix+"-perspective";if(!(h.style[e._perspective]!=null)){e._perspective="perspective"}console.log("DivSugar: use '"+e._perspective+"'");e._perspectiveOrigin="-"+e._prefix+"-perspective-origin";if(!(h.style[e._perspectiveOrigin]!=null)){e._perspectiveOrigin="perspective-origin"}console.log("DivSugar: use '"+e._perspectiveOrigin+"'");e._animationName="-"+e._prefix+"-animation-name";if(!(h.style[e._animationName]!=null)){e._animationName="animation-name"}console.log("DivSugar: use '"+e._animationName+"'");e._animationDuration="-"+e._prefix+"-animation-duration";if(!(h.style[e._animationDuration]!=null)){e._animationDuration="animation-duration"}console.log("DivSugar: use '"+e._animationDuration+"'");e._animationTimingFunction="-"+e._prefix+"-animation-timing-function";if(!(h.style[e._animationTimingFunction]!=null)){e._animationTimingFunction="animation-timing-function"}console.log("DivSugar: use '"+e._animationTimingFunction+"'");e._animationDelay="-"+e._prefix+"-animation-delay";if(!(h.style[e._animationDelay]!=null)){e._animationDelay="animation-delay"}console.log("DivSugar: use '"+e._animationDelay+"'");e._animationIterationCount="-"+e._prefix+"-animation-iteration-count";if(!(h.style[e._animationIterationCount]!=null)){e._animationIterationCount="animation-iteration-count"}console.log("DivSugar: use '"+e._animationIterationCount+"'");e._animationDirection="-"+e._prefix+"-animation-direction";if(!(h.style[e._animationDirection]!=null)){e._animationDirection="animation-direction"}console.log("DivSugar: use '"+e._animationDirection+"'");e._animationFillMode="-"+e._prefix+"-animation-fill-mode";if(!(h.style[e._animationFillMode]!=null)){e._animationFillMode="animation-fill-mode"}console.log("DivSugar: use '"+e._animationFillMode+"'");g=e._prefix+"RequestAnimationFrame";if(!(window[g]!=null)){g="requestAnimationFrame"}if(window[g]!=null){e._requestAnimationFrame=function(i){return window[g](i)};return console.log("DivSugar: use '"+g+"'")}else{e._requestAnimationFrame=function(i){return window.setTimeout(i,1000/60)};return console.log("DivSugar: use 'setTimeout' instead of 'requestAnimationFrame'")}})();d=function(){var g,f;g=(new Date()).getTime();f=g-e._lastUpdatedTime;e._lastUpdatedTime=g;e.rootTask.update(f);return e._requestAnimationFrame(d)};this._lastUpdatedTime=(new Date()).getTime();return this._requestAnimationFrame(d)},generateId:function(){return"_divsugar_id_"+(++this._id)},createScene:function(){var e,h,f,d,g;e=1<=arguments.length?c.call(arguments,0):[];h=document.createElement("div");g=this._Scene;for(d in g){f=g[d];h[d]=f}h._initialize.apply(h,e);return h},createSprite:function(){var e,h,f,d,g;e=1<=arguments.length?c.call(arguments,0):[];h=document.createElement("div");g=this._Sprite;for(d in g){f=g[d];h[d]=f}h._initialize.apply(h,e);return h},createTask:function(){var d;d=1<=arguments.length?c.call(arguments,0):[];return(function(i,f,h){h.prototype=i.prototype;var j=new h,e=i.apply(j,f),g=typeof e;return g=="object"||g=="function"?e||j:j})(this._Task,d,function(){})},addCSSAnimation:function(e,g){var j,p,q,o,d,f,n,m,l,k,i;this.removeCSSAnimation(e);d=document.createElement("style");d.innerHTML="@-"+this._prefix+"-keyframes "+e+"{";q=this.NUM_OF_DIGITS;for(p in g){d.innerHTML+=""+p+"{";f=null;i=g[p];for(o in i){n=i[o];switch(o){case"size":d.innerHTML+="width:"+(n[0].toFixed(q))+"px;height:"+(n[1].toFixed(q))+"px;";break;case"visible":d.innerHTML+="visibility:"+(n?"visible":"hidden")+";";break;case"clip":d.innerHTML+="overflow:"+(n?"hidden":"visible")+";";break;case"opacity":d.innerHTML+="opacity:"+(n.toFixed(q))+";";break;case"image":if(!(n!=null)){d.innerHTML+="background-color:transparent;";d.innerHTML+="background-image:none;"}else{if(n.charAt(0)==="#"){d.innerHTML+="background-color:"+n+";";d.innerHTML+="background-image:none;"}else{d.innerHTML+="background-color:transparent;";d.innerHTML+="background-image:url("+n+");"}}break;case"imageClip":m=1/(n[2]-n[0])*100;j=1/(n[3]-n[1])*100;l=n[0]*m;k=n[1]*j;q=b.NUM_OF_DIGITS;d.innerHTML+="background-position:"+(l.toFixed(q))+"% "+(k.toFixed(q))+"%;";d.innerHTML+="background-size:"+(m.toFixed(q))+"% "+(j.toFixed(q))+"%;";break;case"transform":if(f==null){f=new b.Matrix()}f.set(n);break;case"translate":if(f==null){f=new b.Matrix()}f.translate(n[0],n[1],n[2]);break;case"rotate":if(f==null){f=new b.Matrix()}f.rotate(n[0],n[1],n[2]);break;case"scale":if(f==null){f=new b.Matrix()}f.scale(n[0],n[1],n[2])}}if(f!=null){d.innerHTML+=""+this._transform+":"+(f.toCSSTransform())+";"}d.innerHTML+="}"}d.innerHTML+="}";document.head.appendChild(d);this._animations[e]=d;console.log("DivSugar: added css animation");return console.log(d.innerHTML)},removeCSSAnimation:function(d){if(d in this._animations){document.head.removeChild(this._animations[d]);return delete this._animations[d]}}};(window.DivSugar=b)._initialize();b.Vector=(function(){d.name="Vector";function d(e,h,g){var f;switch(arguments.length){case 0:this.x=this.y=this.z=0;break;case 1:f=e;this.x=f.x;this.y=f.y;this.z=f.z;break;default:this.x=e;this.y=h;this.z=g}}d.prototype.set=function(e,h,g){var f;if(arguments.length===1){f=e;this.x=f.x;this.y=f.y;this.z=f.z}else{this.x=e;this.y=h;this.z=g}return this};d.prototype.neg=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};d.prototype.add=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z;return this};d.prototype.sub=function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z;return this};d.prototype.mul=function(e){this.x*=e;this.y*=e;this.z*=e;return this};d.prototype.div=function(f){var e;e=1/f;this.x*=e;this.y*=e;this.z*=e;return this};d.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};d.prototype.sqNorm=function(){return this.x*this.x+this.y*this.y+this.z*this.z};d.prototype.dist=function(e){return b.Vector._tmpVec1.set(this).sub(e).norm()};d.prototype.sqDist=function(e){return b.Vector._tmpVec1.set(this).sub(e).sqNorm()};d.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z};d.prototype.cross=function(e){return this.set(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)};d.prototype.normalize=function(){var e;e=this.norm();if(e<b.EPSILON){return this.set(b.Vector.X_UNIT)}else{return this.div(e)}};d.prototype.rotateX=function(f){var g,e;e=Math.sin(f*b.DEG_TO_RAD);g=Math.cos(f*b.DEG_TO_RAD);return this.set(this.x,this.y*g-this.z*e,this.z*g+this.y*e)};d.prototype.rotateY=function(f){var g,e;e=Math.sin(f*b.DEG_TO_RAD);g=Math.cos(f*b.DEG_TO_RAD);return this.set(this.x*g+this.z*e,this.y,this.z*g-this.x*e)};d.prototype.rotateZ=function(f){var g,e;e=Math.sin(f*b.DEG_TO_RAD);g=Math.cos(f*b.DEG_TO_RAD);return this.set(this.x*g-this.y*e,this.y*g+this.x*e,this.z)};d.prototype.lerp=function(g,f){var e;if(f>1-b.EPSILON){this.set(g)}else{if(f>=b.EPSILON){e=b.Vector._tmpVec1;e.set(g).mul(f);this.mul(1-f).add(e)}}return this};d.prototype.toLocal=function(f){var e;e=b.Vector._tmpVec1;e.set(this.sub(f.trans));return this.set(e.dot(f.xAxis)/f.xAxis.sqNorm(),e.dot(f.yAxis)/f.yAxis.sqNorm(),e.dot(f.zAxis)/f.zAxis.sqNorm())};d.prototype.toGlobal=function(f){var h,g,e;h=b.Vector._tmpVec1;g=b.Vector._tmpVec2;e=b.Vector._tmpVec3;h.set(f.xAxis).mul(this.x);g.set(f.yAxis).mul(this.y);e.set(f.zAxis).mul(this.z);return this.set(h).add(g).add(e).add(f.trans)};d.prototype.toLocal_noTrans=function(e){return this.set(this.dot(e.xAxis)/e.xAxis.sqNorm(),this.dot(e.yAxis)/e.yAxis.sqNorm(),this.dot(e.zAxis)/e.zAxis.sqNorm())};d.prototype.toGlobal_noTrans=function(f){var h,g,e;h=b.Vector._tmpVec1;g=b.Vector._tmpVec2;e=b.Vector._tmpVec3;h.set(f.xAxis).mul(this.x);g.set(f.yAxis).mul(this.y);e.set(f.zAxis).mul(this.z);return this.set(h).add(g).add(e)};d.prototype.equal=function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z};d.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};return d})();b.Vector.ZERO=new b.Vector(0,0,0);b.Vector.X_UNIT=new b.Vector(1,0,0);b.Vector.Y_UNIT=new b.Vector(0,1,0);b.Vector.Z_UNIT=new b.Vector(0,0,1);b.Vector._tmpVec1=new b.Vector();b.Vector._tmpVec2=new b.Vector();b.Vector._tmpVec3=new b.Vector();b.Matrix=(function(){d.name="Matrix";function d(e){switch(arguments.length){case 0:this.xAxis=new b.Vector(b.Vector.X_UNIT);this.yAxis=new b.Vector(b.Vector.Y_UNIT);this.zAxis=new b.Vector(b.Vector.Z_UNIT);this.trans=new b.Vector(b.Vector.ZERO);break;case 1:this.xAxis=new b.Vector(e.xAxis);this.yAxis=new b.Vector(e.yAxis);this.zAxis=new b.Vector(e.zAxis);this.trans=new b.Vector(e.trans);break;default:this.xAxis=new b.Vector(arguments[0],arguments[1],arguments[2]);this.yAxis=new b.Vector(arguments[3],arguments[4],arguments[5]);this.zAxis=new b.Vector(arguments[6],arguments[7],arguments[8]);this.trans=new b.Vector(arguments[9],arguments[10],arguments[11])}}d.prototype.set=function(e){if(arguments.length===1){this.xAxis.set(e.xAxis);this.yAxis.set(e.yAxis);this.zAxis.set(e.zAxis);this.trans.set(e.trans)}else{this.xAxis.set(arguments[0],arguments[1],arguments[2]);this.yAxis.set(arguments[3],arguments[4],arguments[5]);this.zAxis.set(arguments[6],arguments[7],arguments[8]);this.trans.set(arguments[9],arguments[10],arguments[11])}return this};d.prototype.fromQuaternion=function(h){var o,n,m,l,u,p,i,f,g,s,k,r,e,q,j,t;n=h.x;m=h.y;l=h.z;o=h.w;f=n+n;r=m+m;j=l+l;u=o*f;p=o*r;i=o*j;g=n*f;s=n*r;k=n*j;e=m*r;q=m*j;t=l*j;this.set(1-(e+t),s+i,k-p,s-i,1-(g+t),q+u,k+p,q-u,1-(g+e),0,0,0);return this};d.prototype.orthonormalize=function(){var g,f,e;g=b.Matrix._tmpVec1;f=b.Matrix._tmpVec2;e=b.Matrix._tmpVec3;e.set(this.zAxis).normalize();g.set(this.yAxis).cross(this.zAxis).normalize();f.set(e).cross(g);this.xAxis.set(g);this.yAxis.set(f);this.zAxis.set(e);return this};d.prototype.translate=function(e,j,i){var h,g,f;h=b.Matrix._tmpVec1;g=b.Matrix._tmpVec2;f=b.Matrix._tmpVec3;h.set(this.xAxis).mul(e);g.set(this.yAxis).mul(j);f.set(this.zAxis).mul(i);this.trans.add(h).add(g).add(f);return this};d.prototype.rotate=function(h,g,e){var j,i,f;if(h!==0){f=Math.sin(h*b.DEG_TO_RAD);j=Math.cos(h*b.DEG_TO_RAD);i=b.Matrix._tmpMat1;i.set(1,0,0,0,j,f,0,-f,j,0,0,0).toGlobal(this);this.set(i)}if(g!==0){f=Math.sin(g*b.DEG_TO_RAD);j=Math.cos(g*b.DEG_TO_RAD);i=b.Matrix._tmpMat1;i.set(j,0,-f,0,1,0,f,0,j,0,0,0).toGlobal(this);this.set(i)}if(e!==0){f=Math.sin(e*b.DEG_TO_RAD);j=Math.cos(e*b.DEG_TO_RAD);i=b.Matrix._tmpMat1;i.set(j,f,0,-f,j,0,0,0,1,0,0,0).toGlobal(this);this.set(i)}return this};d.prototype.scale=function(g,f,e){this.xAxis.mul(g);this.yAxis.mul(f);this.zAxis.mul(e);return this};d.prototype.slerp=function(i,g){var e,h,f;if(g>1-b.EPSILON){this.set(i)}else{if(g>=b.EPSILON){f=b.Matrix._tmpVec1;e=b.Matrix._tmpQuat1;h=b.Matrix._tmpQuat2;e.fromMatrix(this);h.fromMatrix(i);f.set(this.trans).lerp(i.trans,g);this.fromQuaternion(e.slerp(h,g));this.trans.set(f)}}return this};d.prototype.slerp_noTrans=function(h,f){var e,g;if(f>1-b.EPSILON){this.set(h);this.trans.set(b.Vector.ZERO)}else{if(f>=b.EPSILON){e=b.Matrix._tmpQuat1;g=b.Matrix._tmpQuat2;e.fromMatrix(this);g.fromMatrix(h);this.fromQuaternion(e.slerp(g,f))}else{this.trans.set(b.Vector.ZERO)}}return this};d.prototype.toLocal=function(g){var h,i,e,f;f=b.Matrix._tmpVec1;h=1/g.xAxis.sqNorm();i=1/g.yAxis.sqNorm();e=1/g.zAxis.sqNorm();f.set(this.trans).sub(g.trans);this.set(this.xAxis.dot(g.xAxis)*h,this.xAxis.dot(g.yAxis)*i,this.xAxis.dot(g.zAxis)*e,this.yAxis.dot(g.xAxis)*h,this.yAxis.dot(g.yAxis)*i,this.yAxis.dot(g.zAxis)*e,this.zAxis.dot(g.xAxis)*h,this.zAxis.dot(g.yAxis)*i,this.zAxis.dot(g.zAxis)*e,f.dot(g.xAxis)*h,f.dot(g.yAxis)*i,f.dot(g.zAxis)*e);return this};d.prototype.toGlobal=function(e){this.xAxis.toGlobal_noTrans(e);this.yAxis.toGlobal_noTrans(e);this.zAxis.toGlobal_noTrans(e);this.trans.toGlobal(e);return this};d.prototype.toLocal_noTrans=function(f){var g,h,e;g=1/f.xAxis.sqNorm();h=1/f.yAxis.sqNorm();e=1/f.zAxis.sqNorm();this.set(this.xAxis.dot(f.xAxis)*g,this.xAxis.dot(f.yAxis)*h,this.xAxis.dot(f.zAxis)*e,this.yAxis.dot(f.xAxis)*g,this.yAxis.dot(f.yAxis)*h,this.yAxis.dot(f.zAxis)*e,this.zAxis.dot(f.xAxis)*g,this.zAxis.dot(f.yAxis)*h,this.zAxis.dot(f.zAxis)*e,0,0,0);return this};d.prototype.toGlobal_noTrans=function(e){this.xAxis.toGlobal_noTrans(e);this.yAxis.toGlobal_noTrans(e);this.zAxis.toGlobal_noTrans(e);this.trans.set(b.Vector.ZERO);return this};d.prototype.lookAt=function(g,f,e){this.zAxis.set(g).sub(f).normalize();this.xAxis.set(e).cross(this.zAxis).normalize();this.yAxis.set(this.zAxis).cross(this.xAxis);this.trans.set(g);return this};d.prototype.equal=function(e){return this.xAxis.equal(e.xAxis)&&this.yAxis.equal(e.yAxis)&&this.zAxis.equal(e.zAxis)&&this.trans.equal(e.trans)};d.prototype.toString=function(){return"("+(this.xAxis.toString())+", "+(this.yAxis.toString())+", "+(this.zAxis.toString())+", "+(this.trans.toString())+")"};d.prototype.toCSSTransform=function(){var e;e=b.NUM_OF_DIGITS;return"matrix3d("+(""+(this.xAxis.x.toFixed(e))+", "+(this.xAxis.y.toFixed(e))+", "+(this.xAxis.z.toFixed(e))+", 0, ")+(""+(this.yAxis.x.toFixed(e))+", "+(this.yAxis.y.toFixed(e))+", "+(this.yAxis.z.toFixed(e))+", 0, ")+(""+(this.zAxis.x.toFixed(e))+", "+(this.zAxis.y.toFixed(e))+", "+(this.zAxis.z.toFixed(e))+", 0, ")+(""+(this.trans.x.toFixed(e))+", "+(this.trans.y.toFixed(e))+", "+(this.trans.z.toFixed(e))+", 1)")};return d})();b.Matrix.UNIT=new b.Matrix(1,0,0,0,1,0,0,0,1,0,0,0);b.Matrix._tmpVec1=new b.Vector();b.Matrix._tmpVec2=new b.Vector();b.Matrix._tmpVec3=new b.Vector();b.Matrix._tmpMat1=new b.Matrix();b.Quaternion=(function(){d.name="Quaternion";function d(e,i,h,f){var g;switch(arguments.length){case 0:this.x=this.y=this.z=this.w=0;break;case 1:g=e;this.x=g.x;this.y=g.y;this.z=g.z;this.w=g.w;break;default:this.x=e;this.y=i;this.z=h;this.w=f}}d.prototype.set=function(e,i,h,f){var g;if(arguments.length===1){g=e;this.x=g.x;this.y=g.y;this.z=g.z;this.w=g.w}else{this.x=e;this.y=i;this.z=h;this.w=f}return this};d.prototype.fromMatrix=function(i){var h,f,l,g,e,m,j;f=i.xAxis;l=i.yAxis;g=i.zAxis;j=f.x+l.y+g.z;if(j>0){e=Math.sqrt(j+1);m=0.5/e;this.set((l.z-g.y)*m,(g.x-f.z)*m,(f.y-l.x)*m,e*0.5)}else{h=l.y>f.x?(g.z>l.y?2:1):(g.z>f.x?2:0);switch(h){case 0:e=Math.sqrt(f.x-(l.y+g.z)+1);m=e!==0?0.5/e:e;this.set(e*0.5,(f.y+l.x)*m,(g.x+f.z)*m,(l.z-g.y)*m);break;case 1:e=Math.sqrt(l.y-(g.z+f.x)+1);m=e!==0?0.5/e:e;this.set((f.y+l.x)*m,e*0.5,(l.z+g.y)*m,(g.x-f.z)*m);break;default:e=Math.sqrt(g.z-(f.x+l.y)+1);m=e!==0?0.5/e:e;this.set((g.x+f.z)*m,(l.z+g.y)*m,e*0.5,(f.y-l.x)*m)}}return this};d.prototype.slerp=function(l,f){var e,k,g,j,i,h;if(f>1-b.EPSILON){this.set(l)}else{if(f>=b.EPSILON){g=b.Quaternion._tmpQuat1;e=this.x*l.x+this.y*l.y+this.z*l.z+this.w*l.w;if(e<0){e=-e;g.set(-l.x,-l.y,-l.z,-l.w)}else{g.set(l)}if(e>=1){this.set(l)}else{k=Math.acos(e>1?1:e);h=Math.sin(k);j=Math.sin(k*(1-f))/h;i=Math.sin(k*f)/h;this.set(this.x*j+g.x*i,this.y*j+g.y*i,this.z*j+g.z*i,this.w*j+g.w*i)}}}return this};d.prototype.equal=function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w};d.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};return d})();b.Quaternion._tmpQuat1=new b.Quaternion();b.Matrix._tmpQuat1=new b.Quaternion();b.Matrix._tmpQuat2=new b.Quaternion();b._Scene={_initialize:function(d){this.id=d!=null?d:null;this.style.margin="0px";this.style.padding="0px";this.style.position="relative";this.style.overflow="hidden";this.style[b._transformStyle]="preserve-3d";this.style[b._transformOrigin]="0% 0%";this.style[b._perspectiveOrigin]="50% 50%";this.setPerspective(1000);this.setSize(100,100);this.setPosition(0,0);this.setVisible(true);this.setClip(true);this.setOpacity(1);this.setImage("#0000ff");return this.setImageClip(0,0,1,1)},getPerspective:function(){return this._perspective},setPerspective:function(d){this._perspective=d;this.style[b._perspective]=""+(d.toFixed(b.NUM_OF_DIGITS))+"px";return this},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewWidth:function(){return this._viewWidth},getViewHeight:function(){return this._viewHeight},setSize:function(d,k,f,e){var l,i,h,j,g;if(f==null){f=d}if(e==null){e=k}this._width=d;this._height=k;this._viewWidth=f;this._viewHeight=e;j=(d-f)/2;g=(k-e)/2;i=d/f;h=k/e;l=b.NUM_OF_DIGITS;this.style.width=""+(f.toFixed(l))+"px";this.style.height=""+(e.toFixed(l))+"px";this.style[b._transform]="translate("+(j.toFixed(l))+"px, "+(g.toFixed(l))+"px) scale("+(i.toFixed(l))+", "+(h.toFixed(l))+")";this.setImageClip(this._imageClipU1,this._imageClipV1,this._imageClipU2,this._imageClipV2);return this},getPositionX:function(){return this._positionX},getPositionY:function(){return this._positionY},setPosition:function(d,e){this._positionX=d;this._positionY=e;this.style.left=""+(d.toFixed(b.NUM_OF_DIGITS))+"px";this.style.top=""+(e.toFixed(b.NUM_OF_DIGITS))+"px";return this},getVisible:function(){return this._visible},setVisible:function(d){this._visible=d;this.style.visibility=d?"visible":"hidden";return this},getClip:function(){return this._clip},setClip:function(d){this._clip=d;this.style.overflow=d?"hidden":"visible";return this},getOpacity:function(){return this._opacity},setOpacity:function(d){this._opacity=d;this.style.opacity=d.toFixed(b.NUM_OF_DIGITS);return this},getImage:function(){return this._image},setImage:function(d){this._image=d;if(!(d!=null)){this.style.backgroundColor=null;this.style.backgroundImage=null}else{if(d.charAt(0)==="#"){this.style.backgroundColor=d;this.style.backgroundImage=null}else{this.style.backgroundColor=null;this.style.backgroundImage="url("+d+")"}}return this},getImageClipU1:function(){return this._imageClipU1},getImageClipV1:function(){return this._imageClipV1},getImageClipU2:function(){return this._imageClipU2},getImageClipV2:function(){return this._imageClipV2},setImageClip:function(e,k,d,i){var f,m,l,j,g;this._imageClipU1=e;this._imageClipV1=k;this._imageClipU2=d;this._imageClipV2=i;l=1/(d-e)*100;f=1/(i-k)*100;j=e*l;g=k*f;m=b.NUM_OF_DIGITS;this.style.backgroundPosition=""+(j.toFixed(m))+"% "+(g.toFixed(m))+"%";this.style.backgroundSize=""+(l.toFixed(m))+"% "+(f.toFixed(m))+"%";return this}};b._Sprite={_initialize:function(d){this.id=d!=null?d:null;this.style.margin="0px";this.style.padding="0px";this.style.position="absolute";this.style[b._transformStyle]="preserve-3d";this.style[b._transformOrigin]="0% 0%";this._transform=new b.Matrix();this.setSize(100,100);this.setPosition(0,0,0);this.setVisible(true);this.setClip(false);this.setOpacity(1);this.setImage(null);this.setImageClip(0,0,1,1);return this.stopCSSAnimation()},getWidth:function(){return this._width},getHeight:function(){return this._height},setSize:function(e,d){this._width=e;this._height=d;this.style.width=""+(e.toFixed(b.NUM_OF_DIGITS))+"px";this.style.height=""+(d.toFixed(b.NUM_OF_DIGITS))+"px";this.setImageClip(this._imageClipU1,this._imageClipV1,this._imageClipU2,this._imageClipV2);return this},getPositionX:function(){return this._transform.trans.x},getPositionY:function(){return this._transform.trans.y},getPositionZ:function(){return this._transform.trans.z},getPosition:function(d){d.x=this._transform.trans.x;d.y=this._transform.trans.y;d.z=this._transform.trans.z;return this},setPosition:function(d,g,f){var e;if(arguments.length===1){e=d;this._transform.trans.set(e)}else{this._transform.trans.x=d;this._transform.trans.y=g;this._transform.trans.z=f}this.style[b._transform]=this._transform.toCSSTransform();return this},getTransform:function(d){d.set(this._transform);return this},setTransform:function(d){this._transform.set(d);this.style[b._transform]=this._transform.toCSSTransform();return this},getVisible:b._Scene.getVisible,setVisible:b._Scene.setVisible,getClip:b._Scene.getClip,setClip:b._Scene.setClip,getOpacity:b._Scene.getOpacity,setOpacity:b._Scene.setOpacity,getImage:b._Scene.getImage,setImage:b._Scene.setImage,getImageClipU1:b._Scene.getImageClipU1,getImageClipV1:b._Scene.getImageClipV1,getImageClipU2:b._Scene.getImageClipU2,getImageClipV2:b._Scene.getImageClipV2,setImageClip:b._Scene.setImageClip,getCSSAnimation:function(){return this._cssAnimation},playCSSAnimation:function(e,j,g,d,f,i,h){if(g==null){g="ease"}if(d==null){d=0}if(f==null){f=1}if(i==null){i="normal"}if(h==null){h="both"}this._cssAnimation=e;this.style[b._animationName]=e;this.style[b._animationDuration]=""+(j.toFixed(b.NUM_OF_DIGITS))+"s";this.style[b._animationTimingFunction]=g;this.style[b._animationDirection]=""+(d.toFixed(b.NUM_OF_DIGITS))+"s";this.style[b._animationIterationCount]=f;this.style[b._animationDirection]=i;this.style[b._animationFillMode]=h;return this},stopCSSAnimation:function(d){this._cssAnimation=null;this.style[b._animationName]="none";return this},translate:function(d,f,e){this._transform.translate(d,f,e);this.style[b._transform]=this._transform.toCSSTransform();return this},rotate:function(f,e,d){this._transform.rotate(f,e,d);this.style[b._transform]=this._transform.toCSSTransform();return this},scale:function(f,e,d){this._transform.scale(f,e,d);this.style[b._transform]=this._transform.toCSSTransform();return this}};b._Task=(function(){d.name="_Task";function d(e){this.id=e;this.update=a(this.update,this);this.active=true;this.onUpdate=null;this.onDestroy=null;this._parent=null;this._children=[]}d.prototype.getParent=function(){return this._parent};d.prototype.update=function(g){var j,i,f,h,e;if(this.active){if(typeof this.onUpdate==="function"){this.onUpdate(g)}h=this._children;e=[];for(i=0,f=h.length;i<f;i++){j=h[i];e.push(j.update(g))}return e}};d.prototype.destroy=function(){var j,i,g,h,e,f;if(typeof this.onDestroy==="function"){this.onDestroy()}if((h=this._parent)!=null){h.removeChild(this)}e=this._children;f=[];for(i=0,g=e.length;i<g;i++){j=e[i];f.push(j.destroy())}return f};d.prototype.appendChild=function(e){this.removeChild(e);this._children.push(e);return e._parent=this};d.prototype.removeChild=function(e){var f;f=this._children.indexOf(e);if(f>-1){this._children.splice(f,1);e._parent=null}return this};d.prototype.getTaskById=function(j){var i,f,h,e,g;if(this.id===j){return this}else{g=this._children;for(h=0,e=g.length;h<e;h++){i=g[h];f=i.getTaskById(j);if(f!=null){return f}}return null}};return d})();b.rootTask=b.createTask("root")}).call(this);